#!/usr/bin/env sh

resources="$HOME/.config/yadm/bootstrap-resources"

init_submodules() (
   # Because Git submodule commands cannot operate without a work tree, they must
   # be run from within $HOME (assuming this is the root of your dotfiles)
   cd "$HOME"
   echo "Init submodules"
   echo yadm submodule update --recursive --init
)

install_packages() (   
   echo "Install packages"

   # Manjaro
   if uname -r | grep -i manjaro >/dev/null 2>&1 ; then
      manjaro_packages
   fi
)

manjaro_packages() {
   yay -S --needed - < "$resources/packages.manjaro"
}

install_python_modules() (
   echo "Install Python modules"
   pip install --user pywal ipython sympy pandas
)

configure_vs_code() (   
   echo "Configure VS Code"
   cat "$resources/vscode.extensions" | xargs -n 1 code --force --install-extension
)

init_submodules
install_packages
install_python_modules
configure_vs_code
exit 0
